<!doctype html>
<html lang="en">

<head>
    <title>Members | Corrpution Inc</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Styles -->
    <link rel="stylesheet" href="../index.css">
    <!-- Page Specific Styles -->
    <style>
        .swiper {
            width: 100vw !important;
            max-width: 100vw !important;
            overflow-x: hidden !important;
            padding: 1em;
        }
    </style>
    <!-- Safari Theme Color -->
    <meta name="theme-color" content="#0f0f0c">
</head>

<body>
    <video autoplay muted loop id="page-background">
        <source src="../assets/background/background.mp4" type="video/mp4">
    </video>

    <nav>
        <a href="../" id="home-link-sm" class="text-crt">Corruption Inc</a>
        <div class="nav-links">
            <a href="../members/" id="memberslink" class="active">Members</a>
            <a href="../contact/" id="contactlink">Contact</a>
            <a href="../" id="home-link" class="text-crt">Corruption Inc</a>
            <a href="../watch/" id="watchlink">Watch</a>
            <a href="../community" id="communitylink">Community</a>
        </div>
    </nav>

    <section id="main" class="text-center">
        <div>
            <h1 class="title">Meet the Founders</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptatibus tenetur nostrum, animi similique
                obcaecati totam id rem commodi dicta quia repellendus, est et! Soluta sunt aut quae dolorum fugit ut.
            </p>
            <div id="member-selection">
                <a onclick="chooseMember(this)" id="member-itsfood"><img src="./profiles/itsfood.jpg"></a>
                <a onclick="chooseMember(this)" id="member-alien"><img src="./profiles/alienislive.jpg"></a>
                <a onclick="chooseMember(this)" id="member-pvppy"><img src="./profiles/pvppy.png"></a>
                <a onclick="chooseMember(this)" id="member-freddie"><img src="./profiles/freddie.png"></a>
                <a onclick="chooseMember(this)" id="member-nic"><img src="./profiles/nic.png"></a>
            </div>
        </div>
    </section>
    <div id="member-container">
        <div id="member-display">
            <img id="member-image">
            <div id="member-info">
                <h1 id="member-name"><i>choose your character</i></h1>
                <p id="member-about"></p>
                <ul id="member-bullets"></ul>
            </div>
        </div>
    </div>
    <div id="member-transition" class="hidden">
        <!-- <video autoplay loop muted src="../assets/background/channelstatic.mp4">
        </video>
        <h1 id="transition-name">scanning</h1> -->
    </div>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/TextPlugin.min.js"></script>
    <!-- Swiper -->
    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>
    <!-- Page Linking -->
    <script>
        let links = document.querySelectorAll('a[href]')
        links.forEach((link) => {
            link.addEventListener('click', function (e) {
                e.preventDefault()
                var link;
                if (typeof e.explicitOriginalTarget === "undefined") {
                    link = e.toElement.href
                } else {
                    link = e.explicitOriginalTarget.href
                }
                // Test if page exists
                var request;
                if (window.XMLHttpRequest) {
                    request = new XMLHttpRequest()
                } else {
                    request = new ActiveXObject("Microsoft.XMLHTTP")
                }
                request.open('GET', `${link}`, false)
                request.send();
                if (request.status !== 404) {
                    window.location.href = link
                } else {
                    alert(`link will navigate to ${link}.`)
                }
            })
        })
    </script>
    <!-- Member Selection -->
    <script>
        let memberInfo;
        const name = document.getElementById('member-name'),
            about = document.getElementById('member-about'),
            profile = document.getElementById('member-image'),
            bullets = document.getElementById('member-bullets'),
            selector = document.getElementById('member-selection'),
            display = document.getElementById('member-display'),
            container = document.getElementById('member-container'),
            transition = document.getElementById('member-transition');

        fetch("data.json")
            .then(response => {
                return response.json()
            })
            .then(data => {
                memberInfo = data;
                console.log(memberInfo)
            })

        let currentSelection;
        function chooseMember(e) {
            if (currentSelection == e.id) return;
            currentSelection = e.id
            let data;
            switch (e.id) {
                case "member-itsfood":
                    data = memberInfo.member.itsfood
                    break;
                case "member-alien":
                    data = memberInfo.member.alien
                    break;
                case "member-pvppy":
                    data = memberInfo.member.pvppy
                    break;
                case "member-freddie":
                    data = memberInfo.member.freddie
                    break;
                case "member-nic":
                    data = memberInfo.member.nic
                    break;
            }
            try {
                container.classList.add('hidden')
                try {
                    transition.classList.remove('hidden')
                } catch (e) {
                    console.log(e)
                }
                selector.querySelector('a.active').classList.remove('active')
            }
            finally {
                try {
                    name.textContent = data.name
                    about.textContent = data.about
                    profile.src = data.image

                    bullets.querySelectorAll('*').forEach(n => n.remove())
                    data.bullets.forEach((item) => {
                        let bullet = document.createElement('li')
                        bullet.textContent = item
                        bullets.appendChild(bullet)
                    })
                }
                catch {
                    (oops) => {
                        console.log('Error:', oops)
                        alert('There was an issue loading this member.')
                    }
                }
                finally {
                    setTimeout(() => {
                        e.classList.add('active')
                        transition.classList.add('hidden')
                        container.classList.remove('hidden')
                    }, 600);
                }
            }
        }
    </script>
</body>

</html>